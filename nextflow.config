//TODO: Fix memory and time allocation

process {
  executor = 'pbs'
  queue = 'workq'
  clusterOptions = '-P rnaseq_nod -N isoseq3'


  $run_ccs{
    module = ['isoseq/3.0.0-RC1-GCCcore-6.4.0']
    cpus = { 16 * task.attempt }
    memory = { 32.GB * task.attempt }
    time = { 2.h * task.attempt }
  }
  
  $run_lima{
    module = ['isoseq/3.0.0-RC1-GCCcore-6.4.0']
    cpus = { 16 * task.attempt }
    memory = { 32.GB * task.attempt }
    time = { 2.h * task.attempt }
  }

  $cluster_reads{
    module = ['isoseq/3.0.0-RC1-GCCcore-6.4.0']
    cpus = { 16 * task.attempt }
    memory = { 32.GB * task.attempt }
    time = { 2.h * task.attempt }
  }


  $polish_reads{
    module = ['isoseq/3.0.0-RC1-GCCcore-6.4.0']
    cpus = { 16 * task.attempt }
    memory = { 32.GB * task.attempt }
    time = { 2.h * task.attempt }
  }

//  $align_reads{
//    module = ['STAR/2.5.3a-foss-2016a']
//    cpus = { 4 * task.attempt }
//    memory = { 12.GB * task.attempt }
//    time = { 2.h * task.attempt }
//  }
//
//
//  $index_bam{
//    module = ['SAMtools/1.7-foss-2018a']
//    cpus = { 4 * task.attempt }
//    memory = { 12.GB * task.attempt }
//    time = { 2.h * task.attempt }
//  }
//
//  $bam_to_bed{
//    module = ['BEDTools/2.27.1-foss-2016b']
//    cpus = { 4 * task.attempt }
//    memory = { 12.GB * task.attempt }
//    time = { 2.h * task.attempt }
// }
//
}

// TODO: check how to effectively use params mappings
params {
  project_dir
  genomes {
    'TAIR10' {
      annotation = '/projects/rnaseq_nod/genomes/tair10/annotation/Arabidopsis_thaliana.TAIR10.32.gtf'
      fasta = '/projects/rnaseq_nod/genomes/tair10/fasta/*.fa'
      star_index = '/starlong_tair10'
      intron_max = 6000
      transcript_max = 60000
    }

    'Araport11' {
      annotation = ''
      fasta = ''
      intron_max = ''
      transcript_max = ''
    }

    'GRCm38' {
      annotation = ''
      fasta = ''
      intron_max = ''
      transcript_max = ''
    }
  }
}
