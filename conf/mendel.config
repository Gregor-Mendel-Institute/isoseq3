params {
  //change the projectName variable to fit your groups project name
  projectName = "rnaseq_nod"
  projectDir = "/lustre/scratch/projects/$projectName"
  
  //change this to fit your input directory globbing pattern
  input = '.'
  output = "$params.input/results"
  genome = 'TAIR10'
  
  //normally dont need setting
  star_index = 'starlong'
  primers = 'resources/primers.fasta'

  genomes {
    'TAIR10' {
      annotation = "$params.projectDir/genomes/tair10/annotation/Arabidopsis_thaliana.TAIR10.32.gtf"
      fasta = "$params.projectDir/genomes/tair10/fasta/*.fa"
      index_dir = "$params.projectDir/genomes/tair10/index"
      intron_max = 6000
      transcript_max = 60000
    }
    'Araport11' {
      annotation = "$params.projectDir/genomes/araport11/annotation/Arabidopsis_thaliana.TAIR10.41.gtf"
      fasta = "$params.projectDir/genomes/tair10/fasta/*.fa" // genome sequence is tair10
      index_dir = "$params.projectDir/genomes/araport11/index"
      intron_max = 6000
      transcript_max = 60000
    }
    // TODO: needs to be added
    'GRCm38' {
      annotation = ''
      fasta = ''
      intron_max = ''
      transcript_max = ''
    }
  }
}

process{

  executor = 'pbs'
  queue = 'short'
  clusterOptions = "-P $params.projectName -N isoseq3"
  errorStrategy = 'retry'
  maxRetries = 2

  withName:run_ccs{
    module = ['isoseq/3.0.0-RC1-GCCcore-6.4.0']
    cpus = { 24 * task.attempt }
    memory = { 64.GB * task.attempt }
    time = { 16.h }
  }
  withName:run_lima{
    module = ['isoseq/3.0.0-RC1-GCCcore-6.4.0']
    cpus = { 24 * task.attempt }
    memory = { 64.GB * task.attempt }
    time = { 16.h }
  }
  withName:cluster_reads{
    module = ['isoseq/3.0.0-RC1-GCCcore-6.4.0']
    cpus = { 24 * task.attempt }
    memory = { 64.GB * task.attempt }
    time = { 16.h }
  }
  withName:polish_reads{
    module = ['isoseq/3.0.0-RC1-GCCcore-6.4.0']
    cpus = { 24 * task.attempt }
    memory = { 64.GB * task.attempt }
    time = { 16.h }
  }
  withName:build_index{
    module = ['STAR/2.5.3a-foss-2016a']
    cpus = { 12 * task.attempt }
    memory = { 32.GB * task.attempt }
    time = { 1.h * task.attempt }
  }
  withName:align_reads{
    module = ['STAR/2.5.3a-foss-2016a', 'SAMtools/1.3.1-foss-2016a']
    cpus = { 24 * task.attempt }
    memory = { 64.GB * task.attempt }
    time = { 16.h }
  }
  withName:bam_to_bed{
    module = ['BEDTools/2.27.1-foss-2016b']
    cpus = { 12 * task.attempt }
    memory = { 32.GB * task.attempt }
    time = { 8.h * task.attempt }
 }
}